<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">

<title>My virtual pest</title>

<style>
.heading
{
	background-color:#3C0;
	margin-left:400px;
	margin-right:400px;
	height:70px;
	margin-top:5px;
}
form
{
	margin-left:500px;
}

</style>

<script type="text/javascript">
<!-- hide from old browsers

var tommy

function VirtualPest(s,pa,pe,c)
{
	//----------------------------------------------------------------------------------------------------
	//This function would be used as a"constructor" that initialises the different properties of my 
	//virtual pest (like Tommy's emotion, Tommy's action, the state and the counter variable) with their 
	//initial values.
	//---------------------------------------------------------------------------------------------------
	
	this.state=s
	this.action=pa
	this.emotion=pe
	this.counter=c
}

function Initialise()
{
	//----------------------------------------------------------------------------------------------------
	//This function would always run when the page is loaded. It sets the value of the state to "happy"
	//and calls the Display() function to display the corresponding values of other form elements.
	//----------------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------------
	//assigning the static global variable tommy with the initial values. Using the constructor 
	//VirtualPest() for this purpose
	//----------------------------------------------------------------------------------------------------
	
	tommy = new VirtualPest("happy","Wag his Tail","",0);
	
	//----------------------------------------------------------------------------------------------------
	//hiding the state text box
	//----------------------------------------------------------------------------------------------------
	
	document.getElementById("state").setAttribute("type","hidden")
	
	//----------------------------------------------------------------------------------------------------
	//calling the Display(tommy) function to display the current state, i.e., happy and then calling the 
	//setTimeout() function to update the state after every second using Simulate() function.
	//----------------------------------------------------------------------------------------------------
	Display(tommy)
	setTimeout("Simulate(tommy)",1000)
}

function Display(pest)
{
	//----------------------------------------------------------------------------------------------------
	//It uses the value of the state and changes the values of different attributes of the pest to the 
	//corresponding values of the state. It uses a set of if-else commands. It shows the current state 
	//through the pest's picture.
	//----------------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------------
	//state refers to the current state of the pest
	//----------------------------------------------------------------------------------------------------
	
	var state=pest.state
	if(state=="happy")
	{
		pest.action="Wag his Tail"
		pest.emotion=""
		document.getElementById("picture").src="2.jpg"
	}
	if(state=="sad")
	{
		pest.action="Sit Down"
		pest.emotion="Whine"
		document.getElementById("picture").src="5.jpg"
		
	}
	if(state=="disgusted")
	{
		pest.action=""
		pest.emotion="Growl"
		document.getElementById("picture").src="3.jpg"
	}
	if(state=="angry")
	{
		pest.action="Bite"
		pest.emotion=""
		document.getElementById("picture").src="1.jpg"
	}
	if(state=="afraid")
	{
		pest.action="Hide"
		pest.emotion="Bark"
		document.getElementById("picture").src="4.jpg"
	}
	
	//------------------------------------------------------------------------------------------------------
	//displaying the different attributes of the pest.
	//------------------------------------------------------------------------------------------------------
	document.getElementById("action").value=pest.action
	document.getElementById("emotion").value=pest.emotion
	document.getElementById("state").value=pest.state
	document.getElementById("counter").value=pest.counter
	
}

function Simulate(pest)
{
	//------------------------------------------------------------------------------------------------------
	//It examines the value of the current state and then sets the values of different form elements by 
	//calling the Display() function. If the value of state is "happy" or "sad", generates a random no. 
	//and then sets the values of states accordingly. It calls the Simulate() function again using the 
	//"setTimeout" function.
	//------------------------------------------------------------------------------------------------------
	
	//------------------------------------------------------------------------------------------------------
	//increasing the value of tommy's counter by one.
	//------------------------------------------------------------------------------------------------------
	pest.counter++
	
	var state=pest.state
	
	//------------------------------------------------------------------------------------------------------
	//generating a random number.
	//------------------------------------------------------------------------------------------------------
	var n=Math.random()
	
	//------------------------------------------------------------------------------------------------------
	//if else staement that changes the state to disgusted when the current state is happy and the value of 
	//n is less than 0.2 and changes the state to afraid if the current state is sad and the value of n is 
	//less than 0.3
	//------------------------------------------------------------------------------------------------------
	
	if(state=="happy" && n<0.2)
	{
		pest.state="disgusted"
	}
	if(state=="sad" && n<0.3)
	{
		pest.state="afraid"
	}
	
	Display(pest)
	
	setTimeout("Simulate(tommy)",1000)
	
	
}
	
function Pat(pest)
{
	//------------------------------------------------------------------------------------------------------
	//This function is called when "Pat on the back" button is clicked. It examines the current state of the
	//pest and changes the state accordingly and then calls the Display() function
	//------------------------------------------------------------------------------------------------------
	
	var state=pest.state
	
	//------------------------------------------------------------------------------------------------------
	//if else statements that change the value of state to happy is disgusted, disgusted if sad, sad if 
	//afraid, afraid if angry and angry if happy
	//------------------------------------------------------------------------------------------------------
	
	if(state=="happy")
	{
		pest.state="disgusted"
	}
	if(state=="disgusted")
	{
		pest.state="sad"
	}
	if(state=="sad")
	{
		pest.state="afraid"
	}
	if(state=="afraid")
	{
		pest.state="angry"
	}
	if(state=="angry")
	{
		pest.state="happy"
	}
	
	Display(pest)
}

function Shout(pest)
{
	//-------------------------------------------------------------------------------------------------------
	//This function is called when "Shout" button is clicked. It examines the current state of the pest and 
	//changes the state accordingly and then calls the Display() function
	//-------------------------------------------------------------------------------------------------------
	
	var state=pest.state
	
	//-------------------------------------------------------------------------------------------------------
	//if else statements that changes the value of state to angry if happy, afraid if angry, sad if afriad, 
	//disgusted if sad, angry if disgusted.
	//-------------------------------------------------------------------------------------------------------
	
	if(state=="happy")
	{
		pest.state="angry"
	}
	if(state=="angry")
	{
		pest.state="afraid"
	}
	if(state=="afraid")
	{
		pest.state="sad"
	}
	if(state=="sad")
	{
		pest.state="disgusted"
	}
	if(state=="disgusted")
	{
		pest.state="angry"
	}
	
	Display(pest)
	
}

//Done hiding--> 
</script>
</head>

<body bgcolor="#0099FF" onLoad="Initialise()">

<div align="center" class="heading">
<center>
<h1 style="margin-top:100px;"><font face="Verdana" color="#FFFFFF" size="+5">TOMMY, THE VIRTUAL PEST</font></h1>
</center>
</div>

<br/><br/><br/>

<form>
<table bgcolor="#0099FF" border="0" cellpadding="0">
<tbody>

<tr>
<td align="left">
<font face="Verdana" color="#FFFFFF">Tommy's Emotion:</font><br/>
<input type="text" name="emotion" id="emotion" size="50"/>
<br/><br/><br/>
</td>

<td width="350px" rowspan="3" align="right">
<img src="2.jpg" name="image" id="picture"/><br/>
</td>
</tr>

<tr>
<td align="left">
<font face="Verdana" color="#FFFFFF">Tommy's Action:</font><br/>
<input type="text" name="action" id="action" size="50" style=""/>
<br/><br/><br/>
</td>
</tr>

<tr>
<td align="left">
<font face="Verdana" color="#FFFFFF">Tommy's Counter:</font><br/>
<input type="text" name="counter" id="counter" size="50"/>
<br/><br/><br/>
</td>
</tr>

<tr>
<td>
<input type="button" value="Pat on the back" onClick="Pat(tommy)"/>
<br/>
<br/>
</td>
<td></td>
</tr>

<tr>
<td>
<input type="button" value="Shout" onClick="Shout(tommy)"/>
<br/><br/>
</td>
<td></td>
</tr>

<tr>
<td align="left">
<font face="Verdana" color="#FFFFFF"></font><br/>
<input type="text" name="state" id="state" size="50"/>
</td>
<td></td>
</tr>

</tbody>
</table>

</form>

<center>
<img src="dog.gif"/>
</center>

<hr align="center" color="#3C0" width="52%" size="3"/>
<p style="margin-left:1100px;"><font color="#FFFFFF"><i>created by Prakash</i></font></p>
</body>
</html>
